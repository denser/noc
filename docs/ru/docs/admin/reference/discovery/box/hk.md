# hk check

<!-- prettier-ignore -->
!!! todo
    Describe *hk* check

## Requirements

`Discovery` в автоматическом режиме собирает огромное количество самой разнообразной информации по железу. Часто возникает необходимость по результатам работы `box discovery` произвести какие-нибудь корректирующие действия: сменить профиль объекта, произвести дополнительные проверки, послать сообщение и так далее. Обычно автоматизация такого рода делается дополнительными скриптами.

Для того, чтобы упростить себе жизнь, мы придумали новый механизм - `housekeeping`. Суть его крайне проста - после прохождения `box discovery` самой последней стадией можно запустить свой обработчик, и делать в нем что угодно. Все последствия на совести автоматизатора.

`Housekeeping` включается на уровне `Object Profile` галочкой `Housekeeping`. Также необходимо задать `handler` для обработки.

**Для версий выше 19 обработчик требуется предварительно прописать в меню `Main -> Setup -> Handlers` и выставить у него галочку `Применять для постобработки опроса (housekeeping)`. После этого он будет доступен для выбора в `Профиле объектов` (`Object Profile`)**

В качестве `handler` указываем `noc.custom.handlers.hk.set_profile`. Теперь после box discovery все BRAS'ы переедут в правильный профиль.

Последняя часть ссылки - `set_profile` указывает на функцию внутри файла которую необходимо вызвать. Для того чтобы не плодить файлы, в одном можно указать несколько функций.


* hk check is enabled in [Managed Object Profile](../../../../user/reference/concepts/managed-object-profile/index.md)
